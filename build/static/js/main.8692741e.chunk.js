(this.webpackJsonpaaa=this.webpackJsonpaaa||[]).push([[0],{165:function(e,t,n){},206:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(36),r=n.n(i),s=(n(165),n(15)),o=n(48),l=n(24),j=n(145),d=n(247),u=n(275),b=n(26),h=n(7),O=n(271),x=n(273),g=n(274),p=n(212),f=n(266),m=n(276),y=n(267),v=n(146),k=n(269),S=n(270),w=n(252),C=n(253),I=n(255),_=n(138),D=n.n(_),B=n(260),A=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],E=["Minor","Major"],P="BPM Searcher",z="https://bpm-searcher.herokuapp.com",T="".concat(z,"/api/v1"),N=n(2),F=Object(B.a)((function(e){var t;return{grow:{flexGrow:1},menu:{textAlign:"center",alignItems:"center",alignContent:"center",justifyContent:"center",display:"flex",alignSelf:"center"},title:(t={display:"none"},Object(h.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(h.a)(t,"cursor","pointer"),t),logo:{cursor:"pointer"},inputRoot:{color:"inherit"},inputInput:Object(h.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})}}));function L(e){var t=F(),n=Object(l.f)(),a=c.a.useState(null),i=Object(s.a)(a,2),r=i[0],o=i[1],j=function(){o(null)},b=function(){n.push("/")};return Object(N.jsx)("div",{className:t.grow,children:Object(N.jsx)(O.a,{position:"static",children:Object(N.jsxs)(x.a,{children:[Object(N.jsx)(g.a,{pr:2,className:t.logo,onClick:b,children:Object(N.jsx)("img",{src:"".concat(z,"/favicon.svg"),height:"25",alt:"Logo"})}),Object(N.jsx)(d.a,{injectFirst:!0,children:Object(N.jsx)(u.a,{theme:Ke,children:Object(N.jsx)(p.a,{className:t.title,variant:"h5",noWrap:!0,onClick:b,children:P})})}),Object(N.jsx)("div",{className:t.grow}),!e.isSignedIn&&Object(N.jsx)(g.a,{px:1,children:Object(N.jsx)(f.a,{color:"secondary",onClick:e.setSignInDialogOpen,children:Object(N.jsx)(p.a,{style:{fontWeight:600},children:"Sign In"})})}),e.isSignedIn&&Object(N.jsx)(g.a,{px:1,children:Object(N.jsx)(m.a,{onClick:function(e){o(e.currentTarget)},children:Object(N.jsx)(y.a,{alt:e.user.displayName,src:e.user.photoURL})})}),Object(N.jsxs)(v.a,{anchorEl:r,open:Boolean(r),onClose:j,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(N.jsx)(k.a,{children:Object(N.jsx)(S.a,{container:!0,alignContent:"center",alignItems:"center",justifyContent:"center",children:Object(N.jsx)(S.a,{item:!0,className:t.menu,children:Object(N.jsxs)(g.a,{p:2,children:[Object(N.jsx)("img",{alt:e.user.displayName,src:e.user.photoURL}),Object(N.jsx)(p.a,{variant:"h6",children:e.user.displayName}),Object(N.jsx)(p.a,{color:"textSecondary",children:e.user.email})]})})})}),Object(N.jsx)(w.a,{}),Object(N.jsxs)(k.a,{onClick:function(){j(),n.push("/user/".concat(e.user.uid,"/playlist"))},children:[Object(N.jsx)(C.a,{children:Object(N.jsx)(D.a,{fontSize:"small"})}),"Playlist"]}),Object(N.jsx)(w.a,{}),Object(N.jsx)(k.a,{children:Object(N.jsx)(S.a,{container:!0,alignContent:"center",alignItems:"center",justifyContent:"center",children:Object(N.jsx)(S.a,{item:!0,children:Object(N.jsx)(g.a,{p:2,children:Object(N.jsxs)(f.a,{variant:"outlined",color:"primary",onClick:function(){o(null),e.signOut()},children:[Object(N.jsx)(I.a,{fontSize:"small"}),"Sign Out"]})})})})})]})]})})})}var M=n(277),R=n(65),U=n(66),W=Object(B.a)((function(e){return{image:{shadowColor:"#000",shadowOffset:{width:0,height:10},shadowOpacity:.12,shadowRadius:60},root:{display:"flex",flexDirection:"column",justifyContent:"center"}}}));function G(){var e=Object(l.g)(),t=W(),n=e.state.data;return Object(N.jsx)("div",{children:Object(N.jsx)(g.a,{display:"flex",justifyContent:"center",children:Object(N.jsx)(g.a,{width:.6,justifyContent:"center",p:5,children:Object(N.jsxs)(S.a,{container:!0,spacing:4,children:[Object(N.jsxs)(S.a,{item:!0,xs:12,sm:6,align:"center",children:[Object(N.jsx)(g.a,{width:"100%",children:Object(N.jsx)("img",{src:n.image_url,width:"100%",style:{maxWidth:"300px"},alt:n.song_name})}),Object(N.jsx)(p.a,{variant:"h6",children:n.album_name})]}),Object(N.jsxs)(S.a,{item:!0,xs:12,sm:6,className:t.root,children:[Object(N.jsx)(p.a,{variant:"h5",color:"textSecondary",children:n.artist}),Object(N.jsx)(p.a,{variant:"h4",children:n.song_name}),Object(N.jsx)(g.a,{py:3,children:Object(N.jsxs)("audio",{controls:!0,src:n.preview_url,children:["Your browser does not support the",Object(N.jsx)("code",{children:"audio"})," element."]})})]}),Object(N.jsx)(S.a,{item:!0,xs:12,sm:6,align:"center",children:Object(N.jsx)(M.a,{children:Object(N.jsxs)(g.a,{p:3,children:[Object(N.jsx)(R.a,{size:"3x",icon:U.b}),Object(N.jsx)(g.a,{p:1,children:Object(N.jsx)(p.a,{variant:"h5",color:"textSecondary",children:"BPM"})}),Object(N.jsx)(p.a,{variant:"h4",children:Math.round(n.bpm)})]})})}),Object(N.jsx)(S.a,{item:!0,xs:12,sm:6,align:"center",children:Object(N.jsx)(M.a,{children:Object(N.jsxs)(g.a,{p:3,children:[Object(N.jsx)(R.a,{size:"3x",icon:U.c}),Object(N.jsx)(g.a,{p:1,children:Object(N.jsx)(p.a,{variant:"h5",color:"textSecondary",children:"KEY"})}),Object(N.jsxs)(p.a,{variant:"h4",children:[A[n.key]," ",E[n.mode]]})]})})}),Object(N.jsx)(S.a,{item:!0,xs:12,sm:6,align:"center",children:Object(N.jsx)(M.a,{children:Object(N.jsxs)(g.a,{p:3,children:[Object(N.jsx)(R.a,{size:"3x",icon:U.d}),Object(N.jsx)(g.a,{p:1,children:Object(N.jsx)(p.a,{variant:"h5",color:"textSecondary",children:"Danceability"})}),Object(N.jsx)(p.a,{variant:"h4",children:n.danceability})]})})}),Object(N.jsx)(S.a,{item:!0,xs:12,sm:6,align:"center",children:Object(N.jsx)(M.a,{children:Object(N.jsxs)(g.a,{p:3,children:[Object(N.jsx)(R.a,{size:"3x",icon:U.a}),Object(N.jsx)(g.a,{p:1,children:Object(N.jsx)(p.a,{variant:"h5",color:"textSecondary",children:"Energy"})}),Object(N.jsx)(p.a,{variant:"h4",children:n.energy})]})})})]})})})})}var Y=n(139),V=n.n(Y),H=Object(B.a)((function(e){return{footer:{backgroundColor:"#f0f3f4",width:"100%",textAlign:"center"}}}));function K(){var e=H();return Object(N.jsx)(g.a,{color:"primary",className:e.footer,children:Object(N.jsxs)(g.a,{p:10,children:[Object(N.jsxs)(S.a,{container:!0,direction:"column",alignItems:"center",alignContent:"center",spacing:2,children:[Object(N.jsx)(S.a,{item:!0,xs:12,children:Object(N.jsx)("img",{src:"".concat(z,"/favicon.svg"),height:"25",alt:"logo"})}),Object(N.jsx)(S.a,{item:!0,xs:12,children:Object(N.jsx)(d.a,{injectFirst:!0,children:Object(N.jsx)(u.a,{theme:Ke,children:Object(N.jsx)(p.a,{variant:"h5",noWrap:!0,color:"primary",display:"inline",children:P})})})}),Object(N.jsx)(S.a,{item:!0,xs:12,children:Object(N.jsx)(m.a,{"aria-label":"show 17 new notifications",color:"inherit",onClick:function(){window.open("https://github.com/ooyamatakehisa/bpm-searcher","_blank")},size:"large",children:Object(N.jsx)(V.a,{})})})]}),Object(N.jsx)(g.a,{p:2,children:Object(N.jsx)(p.a,{children:"\xa9 Takehisa Oyama. All rights reserved."})})]})})}var J=n(278),q=n(256),Q=n(279),X=n(280),Z=n(281),$=n(140),ee=n.n($);b.a.initializeApp({apiKey:"AIzaSyAmi32aEPLYTvsGmgT5DWxGHJGhs19KBhY",authDomain:"bpm-searcher.firebaseapp.com",projectId:"bpm-searcher",storageBucket:"bpm-searcher.appspot.com",messagingSenderId:"380948537710",appId:"1:380948537710:web:37f78017daaee0abe3617f"});var te={signInFlow:"popup",signInSuccessUrl:"/",signInOptions:[b.a.auth.GoogleAuthProvider.PROVIDER_ID,b.a.auth.FacebookAuthProvider.PROVIDER_ID]};function ne(){return Object(N.jsx)("div",{children:Object(N.jsx)(ee.a,{uiConfig:te,firebaseAuth:b.a.auth()})})}function ae(e){var t=e.signInDialogOpen,n=e.closeSignInDialog;return Object(N.jsxs)(J.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(N.jsx)(q.a,{id:"alert-dialog-title",children:"Sign In / Sign Up"}),Object(N.jsxs)(Q.a,{children:[Object(N.jsxs)(X.a,{id:"alert-dialog-description",children:[P," uses the Firebase Authentication as login service and does not have any user information on its server."]}),Object(N.jsx)(g.a,{p:2,children:Object(N.jsx)(ne,{})})]}),Object(N.jsx)(Z.a,{children:Object(N.jsx)(f.a,{onClick:n,color:"primary",children:"Close"})})]})}function ce(e){var t=e.searchValue;return Object(N.jsxs)(S.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",children:[Object(N.jsx)(g.a,{p:6,children:Object(N.jsx)(R.a,{size:"5x",icon:U.e})}),Object(N.jsx)(g.a,{pb:10,children:Object(N.jsxs)(p.a,{variant:"h6",children:["No results found for ",Object(N.jsx)("b",{children:t})]})})]})}var ie=n(282);function re(){return Object(N.jsx)(S.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",children:Object(N.jsx)(g.a,{p:20,children:Object(N.jsx)(ie.a,{})})})}var se=n(272),oe=n(31),le=n(142),je=n.n(le),de=Object(B.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:"65vw",height:55},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}}));function ue(){var e=de(),t=Object(l.f)(),n=Object(l.g)(),c=Object(a.useState)(""),i=Object(s.a)(c,2),r=i[0],o=i[1];Object(a.useEffect)((function(){var e=new URLSearchParams(n.search);null!==e.get("search")&&o(e.get("search"))}),[n]);var j=function(){t.push({pathname:"/track",search:"?search=".concat(r)})};return Object(N.jsx)(S.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",children:Object(N.jsx)(g.a,{p:4,children:Object(N.jsxs)(se.a,{className:e.root,children:[Object(N.jsx)(oe.c,{className:e.input,placeholder:"Search Songs or Artists",inputProps:{"aria-label":"search songs or artists"},value:r,onChange:function(e){o(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&j()}}),Object(N.jsx)(m.a,{type:"submit",className:e.iconButton,onClick:j,"aria-label":"search",size:"large",children:Object(N.jsx)(je.a,{})})]})})})}var be=n(30),he=n.n(be),Oe=n(46),xe=n(144),ge=n.n(xe),pe=n(283),fe=n(284),me=n(285),ye=n(286),ve=n(287),ke=n(288),Se=n(261),we=n(39),Ce=n.n(we),Ie=n(264),_e=n(143),De=n.n(_e);function Be(e){var t=e.snackbarOpen,n=e.setSnackbarOpen,a=e.message,i=function(e,t){"clickaway"!==t&&n(!1)};return Object(N.jsx)(Ie.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,autoHideDuration:4e3,onClose:i,message:a,action:Object(N.jsx)(c.a.Fragment,{children:Object(N.jsx)(m.a,{size:"small","aria-label":"close",color:"inherit",onClick:i,children:Object(N.jsx)(De.a,{fontSize:"small"})})})})}var Ae=Object(B.a)({row:{cursor:"pointer"}});function Ee(e){var t=e.isSignedIn,n=e.setSignInDialogOpen,c=e.result,i=e.ranking,r=e.title,o=Object(l.f)(),j=Ae(),d=Object(a.useState)(!1),u=Object(s.a)(d,2),h=u[0],O=u[1],x=Object(a.useState)([]),y=Object(s.a)(x,2),S=y[0],C=y[1],I=Object(a.useState)(!1),_=Object(s.a)(I,2),D=_[0],B=_[1],A=Object(a.useState)({}),E=Object(s.a)(A,2),P=E[0],z=E[1],F=Object(a.useState)(""),L=Object(s.a)(F,2),M=L[0],R=L[1],U=Object(a.useState)(null),W=Object(s.a)(U,2),G=W[0],Y=W[1],V=Boolean(G),H=Object(a.useState)(""),K=Object(s.a)(H,2),$=K[0],ee=K[1],te=Object(a.useState)(""),ne=Object(s.a)(te,2),ae=ne[0],ce=ne[1],ie=function(){Y(null)},re=function(e,t){o.push("/track/".concat(e),{data:t})},se=function(e){return function(t){e(t.target.value)}};Object(a.useEffect)((function(){Object(Oe.a)(he.a.mark((function e(){var n,a,c;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.next=3,b.a.auth().currentUser;case 3:return n=e.sent,e.next=6,n.getIdToken(!1);case 6:a=e.sent,c={headers:{Authorization:"Bearer ".concat(a)}},Ce.a.get("".concat(T,"/user/").concat(n.uid,"/playlist"),c).then((function(e){C(e.data)})).catch((function(e){return console.log(e)})),e.next=11;break;case 11:case"end":return e.stop()}}),e)})))()}),[t]);return Object(N.jsxs)(g.a,{width:1,display:"flex",justifyContent:"center",children:[Object(N.jsxs)(g.a,{width:.8,justifyContent:"center",children:[Object(N.jsx)(g.a,{m:2,children:Object(N.jsx)(p.a,{variant:"h5",children:r})}),Object(N.jsx)(pe.a,{children:Object(N.jsxs)(fe.a,{"aria-label":"simple table",children:[Object(N.jsx)(me.a,{children:Object(N.jsxs)(ye.a,{children:[Object(N.jsx)(ve.a,{align:"center",children:Object(N.jsx)(p.a,{variant:"subtitle1",gutterBottom:!0,children:"SONG"})}),i&&Object(N.jsx)(ve.a,{align:"center",children:Object(N.jsx)(p.a,{variant:"subtitle1",gutterBottom:!0})}),Object(N.jsx)(ve.a,{}),Object(N.jsx)(ve.a,{width:"15%",align:"center",children:Object(N.jsx)(p.a,{variant:"subtitle1",gutterBottom:!0,children:"BPM"})}),Object(N.jsx)(ve.a,{width:"15%",align:"center",children:"SAVE"})]})}),Object(N.jsx)(ke.a,{children:c.map((function(e,a){return Object(N.jsxs)(ye.a,{className:j.row,hover:!0,children:[Object(N.jsx)(ve.a,{align:"center",onClick:function(){return re(e.spotify_id,e)},children:Object(N.jsx)("img",{src:e.image_url,height:"100",alt:e.song_name})}),i&&Object(N.jsx)(ve.a,{align:"center",onClick:function(){return re(e.spotify_id,e)},children:Object(N.jsx)(p.a,{variant:"h6",gutterBottom:!0,children:a+1})}),Object(N.jsxs)(ve.a,{onClick:function(){return re(e.spotify_id,e)},children:[Object(N.jsx)(p.a,{variant:"h6",children:Object(N.jsx)(g.a,{fontWeight:"fontWeightMedium",children:e.song_name})}),Object(N.jsx)("div",{children:e.artist})]}),Object(N.jsx)(ve.a,{align:"center",onClick:function(){return re(e.spotify_id,e)},children:Object(N.jsx)(p.a,{variant:"h5",gutterBottom:!0,children:Math.round(e.bpm)})}),Object(N.jsx)(ve.a,{align:"center",children:Object(N.jsx)(m.a,{onClick:(c=e,function(e){t?(z(c),Y(e.currentTarget)):n()}),size:"large","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":V?"true":void 0,children:Object(N.jsx)(ge.a,{color:"primary",fontSize:"medium"})})})]},e.spotify_id);var c}))})]})})]}),Object(N.jsxs)(v.a,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:G,open:V,onClose:ie,PaperProps:{style:{maxHeight:450,width:"20ch"}},children:[Object(N.jsx)(k.a,{onClick:function(){return O(!0),void ie()},children:"Create a New Playlist"},"create playlist"),0!==S.length&&Object(N.jsx)(w.a,{}),S.map((function(e){return Object(N.jsx)(k.a,{onClick:function(){return t=P.spotify_id,n=P,a=e.id,ie(),void Object(Oe.a)(he.a.mark((function e(){var c,i,r,s;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=b.a.auth().currentUser,e.next=3,c.getIdToken(!1);case 3:i=e.sent,r={kind:"track",spotify_id:t},s={headers:{Authorization:"Bearer ".concat(i)}},Ce.a.put("".concat(T,"/user/").concat(c.uid,"/playlist/").concat(a),r,s).then((function(e){B(!0),R('"'.concat(n.song_name," (").concat(n.artist,')" is added to your playlist !'))})).catch((function(e){return console.log(e)}));case 7:case"end":return e.stop()}}),e)})))();var t,n,a},children:e.name},e.id)}))]}),Object(N.jsx)(Be,{snackbarOpen:D,setSnackbarOpen:B,message:M}),Object(N.jsxs)(J.a,{open:h,onClose:function(){return O(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(N.jsx)(q.a,{id:"alert-dialog-title",children:"Create a New Playlist and Add the Song"}),Object(N.jsx)(Q.a,{children:Object(N.jsxs)(X.a,{id:"alert-dialog-description",children:[Object(N.jsx)(g.a,{py:1,children:Object(N.jsx)(Se.a,{id:"outlined-basic",label:"Name",variant:"outlined",value:$,onChange:se(ee),required:!0,fullWidth:!0})}),Object(N.jsx)(g.a,{py:1,children:Object(N.jsx)(Se.a,{id:"outlined-multiline-static",label:"Description",value:ae,onChange:se(ce),multiline:!0,fullWidth:!0,rows:4})}),"You can check the playlist by clicking the icon button in the upper right corner."]})}),Object(N.jsx)(Z.a,{children:Object(N.jsx)(f.a,{onClick:function(){Object(Oe.a)(he.a.mark((function e(){var t,n,a,c,i,r,s;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!1),e.next=3,b.a.auth().currentUser;case 3:return t=e.sent,e.next=6,t.getIdToken(!1);case 6:return n=e.sent,a={name:$,desc:ae},c={headers:{Authorization:"Bearer ".concat(n)}},e.prev=9,e.next=12,Ce.a.post("".concat(T,"/user/").concat(t.uid,"/playlist"),a,c);case 12:i=e.sent,r=i.data,C((function(e){return e.push(r),console.log(e),e})),ee(""),ce(""),s=r.id,a={kind:"track",spotify_id:P.spotify_id},Ce.a.put("".concat(T,"/user/").concat(t.uid,"/playlist/").concat(s),a,c).then((function(e){B(!0),R('"'.concat(P.song_name," (").concat(P.artist,')" is added to your playlist !'))})).catch((function(e){return console.log(e)})),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[9,22]])})))()},autoFocus:!0,children:"COMPLETE"})})]})]})}function Pe(e){var t=e.isSignedIn,n=e.setSignInDialogOpen,c=Object(a.useState)(""),i=Object(s.a)(c,2),r=i[0],o=i[1],j=Object(a.useState)([]),d=Object(s.a)(j,2),u=d[0],b=d[1],h=Object(a.useState)(!1),O=Object(s.a)(h,2),x=O[0],g=O[1],p=Object(l.g)();return Object(a.useEffect)((function(){var e=new URLSearchParams(p.search);g(!1),o(e.get("search"));fetch("".concat(T,"/track?search=").concat(e.get("search")),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){if(404===e.status)throw b([]),g(!0),new Error(e.statusText);return e.json()})).then((function(e){b(e),g(!0)})).catch((function(e){return console.log(e)}))}),[p]),Object(N.jsxs)("div",{children:[Object(N.jsx)(ue,{}),!x&&Object(N.jsx)(re,{}),x&&0!==u.length&&Object(N.jsx)(Ee,{isSignedIn:t,setSignInDialogOpen:n,result:u,ranking:!1,title:'Search Results for "'.concat(r,'"')}),x&&0===u.length&&Object(N.jsx)(ce,{searchValue:r})]})}function ze(e){var t=e.isSignedIn,n=e.setSignInDialogOpen,c=Object(a.useState)([]),i=Object(s.a)(c,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){fetch("".concat(T,"/ranking")).then((function(e){return e.json()})).then((function(e){o(e)})).catch((function(e){return console.log(e)}))}),[]),Object(N.jsxs)("div",{children:[Object(N.jsx)(ue,{}),0===r.length&&Object(N.jsx)(re,{}),0!==r.length&&Object(N.jsx)(Ee,{isSignedIn:t,setSignInDialogOpen:n,result:r,ranking:!0,title:"Spotify Top Chart"})]})}var Te=n(18),Ne=n(289),Fe=n(290),Le=n(291),Me=n(258);function Re(e){var t=e.isSignedIn,n=e.setSignInDialogOpen,i=Object(a.useState)([]),r=Object(s.a)(i,2),o=r[0],j=r[1],d=c.a.useState(!1),u=Object(s.a)(d,2),h=u[0],O=u[1],x=c.a.useState(""),y=Object(s.a)(x,2),v=y[0],k=y[1],C=c.a.useState(null),I=Object(s.a)(C,2),_=I[0],D=I[1],B=Object(a.useState)(!1),A=Object(s.a)(B,2),E=A[0],P=A[1],z=Object(l.f)(),F=Object(l.h)().uid;Object(a.useEffect)((function(){Object(Oe.a)(he.a.mark((function e(){var a,c,i;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.next=3,b.a.auth().currentUser;case 3:return a=e.sent,e.next=6,a.getIdToken(!1);case 6:c=e.sent,i={headers:{Authorization:"Bearer ".concat(c)}},Ce.a.get("".concat(T,"/user/").concat(a.uid,"/playlist"),i).then((function(e){j(e.data)})).catch((function(e){return console.log(e)})),e.next=12;break;case 11:n();case 12:case"end":return e.stop()}}),e)})))()}),[t,n,F]);var L=function(e){return function(t){t.stopPropagation(),P(!0),D(e)}},R=function(e){return function(){z.push("/user/".concat(F,"/playlist/").concat(e.id))}};return Object(N.jsxs)(g.a,{width:1,display:"flex",justifyContent:"center",children:[Object(N.jsx)(g.a,{width:.8,py:10,justifyContent:"center",children:Object(N.jsx)(S.a,{container:!0,direction:"row",alignItems:"center",alignContent:"center",spacing:2,width:1,children:o.map((function(e,t){return Object(N.jsx)(S.a,{item:!0,xs:3,children:Object(N.jsxs)(M.a,{onClick:R(e),style:{cursor:"pointer"},children:[Object(N.jsx)(Ne.a,{action:Object(N.jsx)(m.a,{"aria-label":"settings",onClick:L(t),children:Object(N.jsx)(Me.a,{})}),title:e.name,subheader:"".concat(e.num_tracks," songs")}),null!=e.image_url&&Object(N.jsx)(Fe.a,{component:"img",image:e.image_url,alt:e.name}),Object(N.jsxs)(Le.a,{children:[Object(N.jsx)(p.a,{variant:"body1",color:"text.secondary",children:e.desc}),Object(N.jsx)(w.a,{}),Object(N.jsxs)(p.a,{variant:"body2",color:"text.secondary",children:[Object(N.jsx)("br",{}),"Created At"]}),Object(N.jsx)(p.a,{variant:"body2",color:"text.secondary",children:e.created_at})]})]})},e.id)}))})}),Object(N.jsx)(Be,{snackbarOpen:h,setSnackbarOpen:O,message:v}),Object(N.jsxs)(J.a,{open:E,onClose:function(){return P(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(N.jsx)(q.a,{id:"alert-dialog-title",children:"Are you sure you want to delete this playlist ?"}),Object(N.jsx)(Q.a,{children:Object(N.jsxs)(X.a,{id:"alert-dialog-description",children:["All tracks and infomation of this playlist will be permanently deleted.",Object(N.jsx)("br",{}),"Are you sure you want to delete this playlist ?"]})}),Object(N.jsx)(Z.a,{children:Object(N.jsx)(f.a,{onClick:function(){var e=o[_];Object(Oe.a)(he.a.mark((function t(){var n,a,c;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=b.a.auth().currentUser,t.next=3,n.getIdToken(!1);case 3:a=t.sent,c={headers:{Authorization:"Bearer ".concat(a)}},Ce.a.delete("".concat(T,"/user/").concat(n.uid,"/playlist/").concat(e.id),c).then((function(t){o.splice(_,1),j((function(e){return Object(Te.a)(e)})),O(!0),k('"'.concat(e.name,'" is romoved from your playlist list !')),P(!1)})).catch((function(e){return console.log(e)}));case 6:case"end":return t.stop()}}),t)})))()},autoFocus:!0,children:"DELETE"})})]})]})}var Ue=n(53),We=n(98),Ge=n(259),Ye=Object(B.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"center"}}}));function Ve(e){var t=e.isSignedIn,n=e.setSignInDialogOpen,i=Object(a.useState)([]),r=Object(s.a)(i,2),o=r[0],j=r[1],d=Object(a.useState)({}),u=Object(s.a)(d,2),h=u[0],O=u[1],x=c.a.useState(!1),f=Object(s.a)(x,2),y=f[0],v=f[1],k=c.a.useState(""),C=Object(s.a)(k,2),I=C[0],_=C[1],D=Object(l.f)(),B=Ye(),A=Object(l.h)().playlistId;Object(a.useEffect)((function(){Object(Oe.a)(he.a.mark((function e(){var a,c,i;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.next=3,b.a.auth().currentUser;case 3:return a=e.sent,e.next=6,a.getIdToken(!1);case 6:c=e.sent,i={headers:{Authorization:"Bearer ".concat(c)}},Ce.a.get("".concat(T,"/user/").concat(a.uid,"/playlist/").concat(A),i).then((function(e){j(e.data.playlist_tracks),O(e.data.playlist_info)})).catch((function(e){return console.log(e)})),e.next=12;break;case 11:n();case 12:case"end":return e.stop()}}),e)})))()}),[t,A,n]);var E=function(e){return null==e?"":e.split(" ").slice(0,4).join(" ")},P=function(e,t){D.push("/track/".concat(e),{data:t})};return Object(N.jsxs)(g.a,{width:1,display:"flex",justifyContent:"center",children:[Object(N.jsx)(g.a,{width:.8,justifyContent:"center",p:5,children:Object(N.jsxs)(S.a,{container:!0,spacing:8,children:[Object(N.jsx)(S.a,{item:!0,xs:12,sm:3,align:"center",children:Object(N.jsxs)(S.a,{container:!0,direction:"column",spacing:4,children:[Object(N.jsx)(S.a,{item:!0,xs:12,sm:6,align:"center",children:Object(N.jsx)(g.a,{width:"100%",children:Object(N.jsx)("img",{src:h.image_url,width:"100%",style:{maxWidth:"300px"},alt:h.name})})}),Object(N.jsxs)(S.a,{item:!0,xs:12,sm:6,className:B.root,children:[Object(N.jsx)(p.a,{variant:"h4",children:h.name}),Object(N.jsx)(p.a,{variant:"h5",color:"textSecondary",children:h.desc}),Object(N.jsx)(g.a,{py:2,children:Object(N.jsx)(w.a,{})}),Object(N.jsxs)(p.a,{variant:"body2",color:"textSecondary",children:[h.num_tracks," songs",Object(N.jsx)("br",{}),"Created At ",E(h.created_at),Object(N.jsx)("br",{}),"Updated At ",E(h.updated_at)]})]})]})}),Object(N.jsx)(S.a,{item:!0,xs:12,sm:9,align:"center",children:Object(N.jsx)(pe.a,{children:Object(N.jsxs)(fe.a,{children:[Object(N.jsx)(me.a,{children:Object(N.jsxs)(ye.a,{children:[Object(N.jsx)(ve.a,{align:"center"}),Object(N.jsx)(ve.a,{align:"center",children:Object(N.jsx)(p.a,{variant:"subtitle1",gutterBottom:!0,children:"SONG"})}),Object(N.jsx)(ve.a,{align:"center",children:Object(N.jsx)(p.a,{variant:"subtitle1",gutterBottom:!0})}),Object(N.jsx)(ve.a,{}),Object(N.jsx)(ve.a,{width:"15%",align:"center",children:Object(N.jsx)(p.a,{variant:"subtitle1",gutterBottom:!0,children:"BPM"})}),Object(N.jsx)(ve.a,{width:"15%",align:"center",children:Object(N.jsx)(p.a,{variant:"subtitle1",gutterBottom:!0,children:"DELETE"})})]})}),Object(N.jsx)(We.a,{onDragEnd:function(e,t){e.destination&&e.destination.index!==e.source.index&&j((function(t){var n=Object(Te.a)(t),a=n[e.destination.index];return n[e.destination.index]=n[e.source.index],n[e.source.index]=a,n}))},children:Object(N.jsx)(We.c,{droppableId:"droppable",direction:"vertical",children:function(e){return Object(N.jsxs)(ke.a,Object(Ue.a)(Object(Ue.a)({ref:e.innerRef},e.droppableProps),{},{children:[o.map((function(e,t){return Object(N.jsx)(We.b,{draggableId:e.id,index:t,children:function(n,a){return Object(N.jsxs)(ye.a,Object(Ue.a)(Object(Ue.a)({hover:!0,ref:n.innerRef},n.draggableProps),{},{style:Object(Ue.a)(Object(Ue.a)({},n.draggableProps.style),{},{cursor:"pointer"}),children:[Object(N.jsx)(ve.a,{align:"center",children:Object(N.jsx)("div",Object(Ue.a)(Object(Ue.a)({},n.dragHandleProps),{},{children:Object(N.jsx)(Ge.a,{})}))}),Object(N.jsx)(ve.a,{align:"center",onClick:function(){return P(e.track.spotify_id,e.track)},children:Object(N.jsx)("img",{src:e.track.image_url,height:"100",alt:e.track.song_name})}),Object(N.jsx)(ve.a,{align:"center",onClick:function(){return P(e.track.spotify_id,e.track)},children:Object(N.jsx)(p.a,{variant:"h6",gutterBottom:!0,children:t+1})}),Object(N.jsxs)(ve.a,{align:"left",onClick:function(){return P(e.track.spotify_id,e.track)},children:[Object(N.jsx)(p.a,{variant:"h6",children:Object(N.jsx)(g.a,{fontWeight:"fontWeightMedium",children:e.track.song_name})}),Object(N.jsx)("div",{children:e.track.artist})]}),Object(N.jsx)(ve.a,{align:"center",children:Object(N.jsx)(p.a,{variant:"h5",gutterBottom:!0,children:Math.round(e.track.bpm)})}),Object(N.jsx)(ve.a,{align:"center",children:Object(N.jsx)(m.a,{onClick:function(){return function(e,t){Object(Oe.a)(he.a.mark((function n(){var a,c,i;return he.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=b.a.auth().currentUser,n.next=3,a.getIdToken(!1);case 3:c=n.sent,i={headers:{Authorization:"Bearer ".concat(c)}},Ce.a.delete("".concat(T,"/user/").concat(a.uid,"/playlist/").concat(A,"/track/").concat(e.id),i).then((function(n){o.splice(t,1),j((function(e){return Object(Te.a)(e)})),O((function(e){var t=e;return o.length>0?t.image_url=o[0].track.image_url:t.image_url=null,t})),v(!0),_('"'.concat(e.track.song_name," (").concat(e.track.artist,')" is romoved from your playlist !'))})).catch((function(e){return console.log(e)}));case 6:case"end":return n.stop()}}),n)})))()}(e,t)},children:Object(N.jsx)(Me.a,{})})})]}))}},e.id)})),e.placeholder]}))}})})]})})})]})}),Object(N.jsx)(Be,{snackbarOpen:y,setSnackbarOpen:v,message:I})]})}var He=Object(j.a)({palette:{primary:{main:"#da0047",contrastText:"#fff"},secondary:{main:"#ffffff",contrastText:"#a0a0a0"},textSecondary:{main:"#a0a0a0",contrastText:"#a0a0a0"}},typography:{fontFamily:["Lato","Raleway"].join(",")}}),Ke=Object(j.a)({palette:{primary:{main:"#da0047",contrastText:"#fff"}},typography:{fontFamily:["Bowlby One SC"].join(",")}});var Je=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(!1),j=Object(s.a)(r,2),h=j[0],O=j[1],x=c.a.useState(!1),g=Object(s.a)(x,2),p=g[0],f=g[1],m=c.a.useState(!1),y=Object(s.a)(m,2),v=y[0],k=y[1];return Object(a.useEffect)((function(){b.a.auth().onAuthStateChanged((function(e){e?(f(!0),i(!0),O(e)):(i(!1),O({}))}))}),[]),Object(N.jsx)(d.a,{injectFirst:!0,children:Object(N.jsxs)(u.a,{theme:He,children:[Object(N.jsxs)(o.a,{children:[Object(N.jsx)(L,{isSignedIn:n,user:h,setSignInDialogOpen:function(){return k(!0)},signOut:function(){f(!0),b.a.auth().signOut()}}),Object(N.jsxs)(l.c,{children:[Object(N.jsx)(l.a,{path:"/",exact:!0,children:Object(N.jsx)(ze,{isSignedIn:n,setSignInDialogOpen:function(){return k(!0)}})}),Object(N.jsx)(l.a,{path:"/track",exact:!0,children:Object(N.jsx)(Pe,{isSignedIn:n,setSignInDialogOpen:function(){return k(!0)}})}),Object(N.jsx)(l.a,{path:"/user/:uid/playlist",exact:!0,children:Object(N.jsx)(Re,{isSignedIn:n,setSignInDialogOpen:function(){return k(!0)}})}),Object(N.jsx)(l.a,{path:"/user/:uid/playlist/:playlistId",children:Object(N.jsx)(Ve,{isSignedIn:n,setSignInDialogOpen:function(){return k(!0)}})}),Object(N.jsx)(l.a,{path:"/track/:spotify_id",children:Object(N.jsx)(G,{})})]})]}),Object(N.jsx)(K,{}),Object(N.jsx)(Be,{snackbarOpen:p,setSnackbarOpen:f,message:n?"Sign In !":"Sign Out !"}),Object(N.jsx)(ae,{signInDialogOpen:v,closeSignInDialog:function(){k(!1)}})]})})},qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,292)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(Je,{})}),document.getElementById("root")),qe()}},[[206,1,2]]]);
//# sourceMappingURL=main.8692741e.chunk.js.map
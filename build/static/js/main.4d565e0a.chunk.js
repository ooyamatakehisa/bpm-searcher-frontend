(this.webpackJsonpaaa=this.webpackJsonpaaa||[]).push([[0],{166:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(36),r=n.n(i),s=(n(166),n(146)),o=n(251),l=n(294),j=n(278),d=n(145),u=n.n(d),b=n(40),h=n(15),O=n(53),x=n(24),p=n(264),g=n(25),f=n(7),m=n(274),y=n(276),v=n(277),k=n(213),S=n(269),C=n(270),w=n(147),I=n(272),_=n(273),P=n(255),D=n(256),B=n(258),E=n(139),T=n.n(E),A=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],N=["Minor","Major"],z="BPM Searcher",L="https://bpm-searcher.herokuapp.com",F="".concat(L,"/api/v1"),M=n(2),R=Object(p.a)((function(e){var t;return{grow:{flexGrow:1},menu:{textAlign:"center",alignItems:"center",alignContent:"center",justifyContent:"center",display:"flex",alignSelf:"center"},title:(t={display:"none"},Object(f.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(f.a)(t,"cursor","pointer"),t),logo:{cursor:"pointer"},inputRoot:{color:"inherit"},inputInput:Object(f.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})}}));function U(e){var t=R(),n=Object(x.f)(),c=a.a.useState(null),i=Object(h.a)(c,2),r=i[0],s=i[1],d=function(){s(null)},u=function(){n.push("/")};return Object(M.jsx)("div",{className:t.grow,children:Object(M.jsx)(m.a,{position:"static",children:Object(M.jsxs)(y.a,{children:[Object(M.jsx)(v.a,{pr:2,className:t.logo,onClick:u,children:Object(M.jsx)("img",{src:"".concat(L,"/favicon.svg"),height:"25",alt:"Logo"})}),Object(M.jsx)(o.a,{injectFirst:!0,children:Object(M.jsx)(l.a,{theme:Xe,children:Object(M.jsx)(k.a,{className:t.title,variant:"h5",noWrap:!0,onClick:u,children:z})})}),Object(M.jsx)("div",{className:t.grow}),!e.isSignedIn&&Object(M.jsx)(v.a,{px:1,children:Object(M.jsx)(S.a,{color:"secondary",onClick:e.setSignInDialogOpen,children:Object(M.jsx)(k.a,{style:{fontWeight:600},children:"Sign In"})})}),e.isSignedIn&&Object(M.jsx)(v.a,{px:1,children:Object(M.jsx)(j.a,{onClick:function(e){s(e.currentTarget)},children:Object(M.jsx)(C.a,{alt:e.user.displayName,src:e.user.photoURL})})}),Object(M.jsxs)(w.a,{anchorEl:r,open:Boolean(r),onClose:d,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(M.jsx)(I.a,{children:Object(M.jsx)(_.a,{container:!0,alignContent:"center",alignItems:"center",justifyContent:"center",children:Object(M.jsx)(_.a,{item:!0,className:t.menu,children:Object(M.jsxs)(v.a,{p:2,children:[Object(M.jsx)("img",{alt:e.user.displayName,src:e.user.photoURL}),Object(M.jsx)(k.a,{variant:"h6",children:e.user.displayName}),Object(M.jsx)(k.a,{color:"textSecondary",children:e.user.email})]})})})}),Object(M.jsx)(P.a,{}),Object(M.jsxs)(I.a,{onClick:function(){d(),n.push("/user/".concat(e.user.uid,"/playlist"))},children:[Object(M.jsx)(D.a,{children:Object(M.jsx)(T.a,{fontSize:"small"})}),"Playlist"]}),Object(M.jsx)(P.a,{}),Object(M.jsx)(I.a,{children:Object(M.jsx)(_.a,{container:!0,alignContent:"center",alignItems:"center",justifyContent:"center",children:Object(M.jsx)(_.a,{item:!0,children:Object(M.jsx)(v.a,{p:2,children:Object(M.jsx)(S.a,{variant:"outlined",color:"primary",onClick:function(){s(null),e.signOut()},startIcon:Object(M.jsx)(B.a,{fontSize:"small"}),children:"Sign Out"})})})})})]})]})})})}var W=n(279),G=n(66),Y=n(67),q=Object(p.a)((function(e){return{image:{shadowColor:"#000",shadowOffset:{width:0,height:10},shadowOpacity:.12,shadowRadius:60},root:{display:"flex",flexDirection:"column",justifyContent:"center"}}}));function V(){var e=Object(x.g)(),t=q(),n=e.state.data;return Object(M.jsx)("div",{children:Object(M.jsx)(v.a,{display:"flex",justifyContent:"center",children:Object(M.jsx)(v.a,{width:.6,justifyContent:"center",p:5,children:Object(M.jsxs)(_.a,{container:!0,spacing:4,children:[Object(M.jsxs)(_.a,{item:!0,xs:12,sm:6,align:"center",children:[Object(M.jsx)(v.a,{width:"100%",children:Object(M.jsx)("img",{src:n.image_url,width:"100%",style:{maxWidth:"300px"},alt:n.song_name})}),Object(M.jsx)(k.a,{variant:"h6",children:n.album_name})]}),Object(M.jsxs)(_.a,{item:!0,xs:12,sm:6,className:t.root,children:[Object(M.jsx)(k.a,{variant:"h5",color:"textSecondary",children:n.artist}),Object(M.jsx)(k.a,{variant:"h4",children:n.song_name}),Object(M.jsx)(v.a,{py:3,children:Object(M.jsxs)("audio",{controls:!0,src:n.preview_url,children:["Your browser does not support the",Object(M.jsx)("code",{children:"audio"})," element."]})})]}),Object(M.jsx)(_.a,{item:!0,xs:12,sm:6,align:"center",children:Object(M.jsx)(W.a,{children:Object(M.jsxs)(v.a,{p:3,children:[Object(M.jsx)(G.a,{size:"3x",icon:Y.b}),Object(M.jsx)(v.a,{p:1,children:Object(M.jsx)(k.a,{variant:"h5",color:"textSecondary",children:"BPM"})}),Object(M.jsx)(k.a,{variant:"h4",children:Math.round(n.bpm)})]})})}),Object(M.jsx)(_.a,{item:!0,xs:12,sm:6,align:"center",children:Object(M.jsx)(W.a,{children:Object(M.jsxs)(v.a,{p:3,children:[Object(M.jsx)(G.a,{size:"3x",icon:Y.c}),Object(M.jsx)(v.a,{p:1,children:Object(M.jsx)(k.a,{variant:"h5",color:"textSecondary",children:"KEY"})}),Object(M.jsxs)(k.a,{variant:"h4",children:[A[n.key]," ",N[n.mode]]})]})})}),Object(M.jsx)(_.a,{item:!0,xs:12,sm:6,align:"center",children:Object(M.jsx)(W.a,{children:Object(M.jsxs)(v.a,{p:3,children:[Object(M.jsx)(G.a,{size:"3x",icon:Y.d}),Object(M.jsx)(v.a,{p:1,children:Object(M.jsx)(k.a,{variant:"h5",color:"textSecondary",children:"Danceability"})}),Object(M.jsx)(k.a,{variant:"h4",children:n.danceability})]})})}),Object(M.jsx)(_.a,{item:!0,xs:12,sm:6,align:"center",children:Object(M.jsx)(W.a,{children:Object(M.jsxs)(v.a,{p:3,children:[Object(M.jsx)(G.a,{size:"3x",icon:Y.a}),Object(M.jsx)(v.a,{p:1,children:Object(M.jsx)(k.a,{variant:"h5",color:"textSecondary",children:"Energy"})}),Object(M.jsx)(k.a,{variant:"h4",children:n.energy})]})})})]})})})})}var H=n(140),K=n.n(H),J=Object(p.a)((function(e){return{footer:{backgroundColor:"#f0f3f4",width:"100%",textAlign:"center"},footerMain:{bottom:0}}}));function Q(){var e=J();return Object(M.jsx)("div",{className:e.footerMain,children:Object(M.jsx)(v.a,{color:"primary",className:e.footer,children:Object(M.jsxs)(v.a,{p:10,children:[Object(M.jsxs)(_.a,{container:!0,direction:"column",alignItems:"center",alignContent:"center",spacing:2,children:[Object(M.jsx)(_.a,{item:!0,xs:12,children:Object(M.jsx)("img",{src:"".concat(L,"/favicon.svg"),height:"25",alt:"logo"})}),Object(M.jsx)(_.a,{item:!0,xs:12,children:Object(M.jsx)(o.a,{injectFirst:!0,children:Object(M.jsx)(l.a,{theme:Xe,children:Object(M.jsx)(k.a,{variant:"h5",noWrap:!0,color:"primary",display:"inline",children:z})})})}),Object(M.jsx)(_.a,{item:!0,xs:12,children:Object(M.jsx)(j.a,{"aria-label":"show 17 new notifications",color:"inherit",onClick:function(){window.open("https://github.com/ooyamatakehisa/bpm-searcher","_blank")},size:"large",children:Object(M.jsx)(K.a,{})})})]}),Object(M.jsx)(v.a,{p:2,children:Object(M.jsx)(k.a,{children:"\xa9 Takehisa Oyama. All rights reserved."})})]})})})}var X=n(280),Z=n(259),$=n(281),ee=n(282),te=n(283),ne=n(141),ce=n.n(ne);g.a.initializeApp({apiKey:"AIzaSyAmi32aEPLYTvsGmgT5DWxGHJGhs19KBhY",authDomain:"bpm-searcher.firebaseapp.com",projectId:"bpm-searcher",storageBucket:"bpm-searcher.appspot.com",messagingSenderId:"380948537710",appId:"1:380948537710:web:37f78017daaee0abe3617f"});var ae={signInFlow:"popup",signInSuccessUrl:"/",signInOptions:[g.a.auth.GoogleAuthProvider.PROVIDER_ID,g.a.auth.FacebookAuthProvider.PROVIDER_ID]};function ie(){return Object(M.jsx)("div",{children:Object(M.jsx)(ce.a,{uiConfig:ae,firebaseAuth:g.a.auth()})})}function re(e){var t=e.signInDialogOpen,n=e.closeSignInDialog;return Object(M.jsxs)(X.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(M.jsx)(Z.a,{id:"alert-dialog-title",children:"Sign In / Sign Up"}),Object(M.jsxs)($.a,{children:[Object(M.jsx)(ee.a,{id:"alert-dialog-description",children:"You can create playlists and save songs to it if you sign in this system. You can also sync the playlists with Spotify playlists in future."}),Object(M.jsx)(v.a,{p:2,children:Object(M.jsx)(ie,{})}),Object(M.jsxs)(ee.a,{children:[z," uses the Firebase Authentication as login service and does not have any user information on its server."]})]}),Object(M.jsx)(te.a,{children:Object(M.jsx)(S.a,{onClick:n,color:"primary",children:"Close"})})]})}function se(e){var t=e.searchValue;return Object(M.jsxs)(_.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",children:[Object(M.jsx)(v.a,{p:6,children:Object(M.jsx)(G.a,{size:"5x",icon:Y.e})}),Object(M.jsx)(v.a,{pb:10,children:Object(M.jsxs)(k.a,{variant:"h6",children:["No results found for ",Object(M.jsx)("b",{children:t})]})})]})}var oe=n(284);function le(){return Object(M.jsx)(_.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",children:Object(M.jsx)(v.a,{p:20,children:Object(M.jsx)(oe.a,{})})})}var je=n(275),de=n(31),ue=n(143),be=n.n(ue),he=Object(p.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",height:55},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}}));function Oe(){var e=he(),t=Object(x.f)(),n=Object(x.g)(),a=Object(c.useState)(""),i=Object(h.a)(a,2),r=i[0],s=i[1];Object(c.useEffect)((function(){var e=new URLSearchParams(n.search);null!==e.get("search")&&s(e.get("search"))}),[n]);var o=function(){""!=r&&t.push({pathname:"/track",search:"?search=".concat(r)})};return Object(M.jsx)(_.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",children:Object(M.jsx)(v.a,{py:4,width:{xs:.9,sm:.7,xl:.4},children:Object(M.jsxs)(je.a,{className:e.root,children:[Object(M.jsx)(de.c,{className:e.input,placeholder:"Search Songs or Artists",inputProps:{"aria-label":"search songs or artists"},value:r,onChange:function(e){s(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&o()}}),Object(M.jsx)(j.a,{type:"submit",className:e.iconButton,onClick:o,"aria-label":"search",size:"large",children:Object(M.jsx)(be.a,{})})]})})})}var xe=n(26),pe=n.n(xe),ge=n(41),fe=n(144),me=n.n(fe),ye=n(285),ve=n(286),ke=n(287),Se=n(288),Ce=n(289),we=n(290),Ie=n(42),_e=n.n(Ie),Pe=n(265);function De(e){var t=e.openCreatePlaylistDialog,n=e.setOpenCreatePlaylistDialog,a=e.onClickCompleteCallback,i=Object(c.useState)(""),r=Object(h.a)(i,2),s=r[0],o=r[1],l=Object(c.useState)(""),j=Object(h.a)(l,2),d=j[0],u=j[1],O=Object(b.b)().enqueueSnackbar,x=function(e){return function(t){e(t.target.value)}};return Object(M.jsx)("div",{children:Object(M.jsxs)(X.a,{open:t,onClose:function(){return n(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(M.jsx)(Z.a,{id:"alert-dialog-title",children:"Create a New Playlist and Add the Song"}),Object(M.jsx)($.a,{children:Object(M.jsxs)(ee.a,{id:"alert-dialog-description",children:[Object(M.jsx)(v.a,{py:1,children:Object(M.jsx)(Pe.a,{id:"outlined-basic",label:"Name",variant:"outlined",value:s,onChange:x(o),required:!0,fullWidth:!0})}),Object(M.jsx)(v.a,{py:1,children:Object(M.jsx)(Pe.a,{id:"outlined-multiline-static",label:"Description",value:d,onChange:x(u),multiline:!0,fullWidth:!0,rows:4})}),"You can check the playlist by clicking the icon button in the upper right corner."]})}),Object(M.jsx)(te.a,{children:Object(M.jsx)(S.a,{onClick:function(){Object(ge.a)(pe.a.mark((function e(){var t,c,i,r,l,j;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!1),e.next=3,g.a.auth().currentUser;case 3:return t=e.sent,e.next=6,t.getIdToken(!1);case 6:return c=e.sent,i={name:s,desc:d},r={headers:{Authorization:"Bearer ".concat(c)}},e.prev=9,e.next=12,_e.a.post("".concat(F,"/user/").concat(t.uid,"/playlist"),i,r);case 12:l=e.sent,j=l.data,void 0!==a&&a(j),o(""),u(""),O('The playlist "'.concat(j.name,'" is successfuly created !')),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[9,20]])})))()},autoFocus:!0,children:"COMPLETE"})})]})})}var Be=Object(p.a)({row:{cursor:"pointer"}});function Ee(e){var t=e.isSignedIn,n=e.setSignInDialogOpen,a=e.result,i=e.ranking,r=e.title,s=Object(x.f)(),o=Be(),l=Object(c.useState)(!1),d=Object(h.a)(l,2),u=d[0],O=d[1],p=Object(c.useState)([]),f=Object(h.a)(p,2),m=f[0],y=f[1],S=Object(c.useState)({}),C=Object(h.a)(S,2),_=C[0],D=C[1],B=Object(c.useState)(null),E=Object(h.a)(B,2),T=E[0],A=E[1],N=Boolean(T),z=Object(b.b)().enqueueSnackbar,L=function(){A(null)},R=function(e,t){s.push("/track/".concat(e),{data:t})},U=function(e){Object(ge.a)(pe.a.mark((function t(){var n,c,a,i;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.auth().currentUser;case 2:return n=t.sent,t.next=5,n.getIdToken(!1);case 5:c=t.sent,a={kind:"track",spotify_id:_.spotify_id},i={headers:{Authorization:"Bearer ".concat(c)}};try{_e.a.put("".concat(F,"/user/").concat(n.uid,"/playlist/").concat(e),a,i).then((function(e){z('"'.concat(_.song_name," (").concat(_.artist,')" is added to your playlist !'))})).catch((function(e){return console.log(e)}))}catch(r){console.log(r)}case 9:case"end":return t.stop()}}),t)})))()};return Object(c.useEffect)((function(){Object(ge.a)(pe.a.mark((function e(){var n,c,a;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return e.next=3,g.a.auth().currentUser;case 3:return n=e.sent,e.next=6,n.getIdToken(!1);case 6:c=e.sent,a={headers:{Authorization:"Bearer ".concat(c)}},_e.a.get("".concat(F,"/user/").concat(n.uid,"/playlist"),a).then((function(e){y(e.data)})).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})))()}),[t]),Object(M.jsxs)(v.a,{width:1,display:"flex",justifyContent:"center",children:[Object(M.jsxs)(v.a,{width:{xs:.9,sm:.8,xl:.5},justifyContent:"center",children:[Object(M.jsx)(v.a,{m:2,children:Object(M.jsx)(k.a,{variant:"h5",children:r})}),Object(M.jsx)(ye.a,{children:Object(M.jsxs)(ve.a,{"aria-label":"simple table",children:[Object(M.jsx)(ke.a,{children:Object(M.jsxs)(Se.a,{children:[Object(M.jsx)(Ce.a,{align:"center",children:Object(M.jsx)(k.a,{variant:"subtitle1",gutterBottom:!0,children:"SONG"})}),i&&Object(M.jsx)(Ce.a,{align:"center",children:Object(M.jsx)(k.a,{variant:"subtitle1",gutterBottom:!0})}),Object(M.jsx)(Ce.a,{}),Object(M.jsx)(Ce.a,{width:"15%",align:"center",children:Object(M.jsx)(k.a,{variant:"subtitle1",gutterBottom:!0,children:"BPM"})}),Object(M.jsx)(Ce.a,{width:"15%",align:"center",children:"SAVE"})]})}),Object(M.jsx)(we.a,{children:a.map((function(e,c){return Object(M.jsxs)(Se.a,{className:o.row,hover:!0,children:[Object(M.jsx)(Ce.a,{align:"center",onClick:function(){return R(e.spotify_id,e)},children:Object(M.jsx)("img",{src:e.image_url,height:"100",alt:e.song_name})}),i&&Object(M.jsx)(Ce.a,{align:"center",onClick:function(){return R(e.spotify_id,e)},children:Object(M.jsx)(k.a,{variant:"h6",gutterBottom:!0,children:c+1})}),Object(M.jsxs)(Ce.a,{onClick:function(){return R(e.spotify_id,e)},children:[Object(M.jsx)(k.a,{variant:"h6",children:Object(M.jsx)(v.a,{fontWeight:"fontWeightMedium",children:e.song_name})}),Object(M.jsx)("div",{children:e.artist})]}),Object(M.jsx)(Ce.a,{align:"center",onClick:function(){return R(e.spotify_id,e)},children:Object(M.jsx)(k.a,{variant:"h5",gutterBottom:!0,children:Math.round(e.bpm)})}),Object(M.jsx)(Ce.a,{align:"center",children:Object(M.jsx)(j.a,{onClick:(a=e,function(e){t?(D(a),A(e.currentTarget)):n()}),size:"large","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":N?"true":void 0,children:Object(M.jsx)(me.a,{color:"primary",fontSize:"medium"})})})]},e.spotify_id);var a}))})]})})]}),Object(M.jsxs)(w.a,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:T,open:N,onClose:L,PaperProps:{style:{maxHeight:450,width:"20ch"}},children:[Object(M.jsx)(I.a,{onClick:function(){return O(!0),void L()},children:"Create a New Playlist"},"create playlist"),0!==m.length&&Object(M.jsx)(P.a,{}),m.map((function(e){return Object(M.jsx)(I.a,{onClick:function(){return t=e.id,L(),void U(t);var t},children:e.name},e.id)}))]}),Object(M.jsx)(De,{openCreatePlaylistDialog:u,setOpenCreatePlaylistDialog:O,onClickCompleteCallback:function(e){O(!1),y((function(t){return t.push(e),t})),U(e.id)}})]})}function Te(e){var t=e.isSignedIn,n=e.setSignInDialogOpen,a=Object(c.useState)(""),i=Object(h.a)(a,2),r=i[0],s=i[1],o=Object(c.useState)([]),l=Object(h.a)(o,2),j=l[0],d=l[1],u=Object(c.useState)(!1),b=Object(h.a)(u,2),O=b[0],p=b[1],g=Object(x.g)();return Object(c.useEffect)((function(){var e=new URLSearchParams(g.search);p(!1),s(e.get("search"));fetch("".concat(F,"/track?search=").concat(e.get("search")),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){if(404===e.status)throw d([]),p(!0),new Error(e.statusText);return e.json()})).then((function(e){d(e),p(!0)})).catch((function(e){return console.log(e)}))}),[g]),Object(M.jsxs)("div",{children:[Object(M.jsx)(Oe,{}),!O&&Object(M.jsx)(le,{}),O&&0!==j.length&&Object(M.jsx)(Ee,{isSignedIn:t,setSignInDialogOpen:n,result:j,ranking:!1,title:'Search Results for "'.concat(r,'"')}),O&&0===j.length&&Object(M.jsx)(se,{searchValue:r})]})}function Ae(e){var t=e.isSignedIn,n=e.setSignInDialogOpen,a=Object(c.useState)([]),i=Object(h.a)(a,2),r=i[0],s=i[1];return Object(c.useEffect)((function(){fetch("".concat(F,"/ranking")).then((function(e){return e.json()})).then((function(e){s(e)})).catch((function(e){return console.log(e)}))}),[]),Object(M.jsxs)("div",{children:[Object(M.jsx)(Oe,{}),0===r.length&&Object(M.jsx)(le,{}),0!==r.length&&Object(M.jsx)(Ee,{isSignedIn:t,setSignInDialogOpen:n,result:r,ranking:!0,title:"Spotify Top Chart"})]})}var Ne=n(18),ze=n(291),Le=n(292),Fe=n(293),Me=n(261),Re=n(262);function Ue(){return Object(M.jsx)(v.a,{width:1,display:"flex",justifyContent:"center",children:Object(M.jsxs)(v.a,{width:.8,py:10,justifyContent:"center",children:[Object(M.jsx)(v.a,{p:1,children:Object(M.jsxs)(k.a,{variant:"h6",color:"text.secondary",children:["You have to sign in so that you can access this information.",Object(M.jsx)("br",{})]})}),Object(M.jsx)(v.a,{p:1,children:Object(M.jsxs)(k.a,{variant:"h6",color:"text.secondary",children:["Please click the ",Object(M.jsx)(S.a,{variant:"contained",children:"SIGN IN"})," button in the upper right corner to sign in."]})})]})})}function We(e){var t=e.isSignedIn,n=e.isLoadingSignIn,i=Object(c.useState)([]),r=Object(h.a)(i,2),s=r[0],o=r[1],l=Object(c.useState)(!0),d=Object(h.a)(l,2),u=d[0],O=d[1],p=Object(c.useState)(!1),f=Object(h.a)(p,2),m=f[0],y=f[1],C=Object(c.useState)(!1),w=Object(h.a)(C,2),I=w[0],D=w[1],B=a.a.useState(null),E=Object(h.a)(B,2),T=E[0],A=E[1],N=Object(c.useState)(!1),z=Object(h.a)(N,2),L=z[0],R=z[1],U=Object(b.b)().enqueueSnackbar,G=Object(x.f)(),Y=Object(x.h)().uid;Object(c.useEffect)((function(){Object(ge.a)(pe.a.mark((function e(){var n,c,a;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return e.next=3,g.a.auth().currentUser;case 3:return n=e.sent,e.next=6,n.getIdToken(!1);case 6:c=e.sent,a={headers:{Authorization:"Bearer ".concat(c)}},_e.a.get("".concat(F,"/user/").concat(n.uid,"/playlist"),a).then((function(e){o(e.data),O(!1),y(0===e.data.length)})).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})))()}),[t,Y]);var q=function(e){return function(t){t.stopPropagation(),R(!0),A(e)}},V=function(e){return function(){G.push("/user/".concat(Y,"/playlist/").concat(e.id))}};return n||u?Object(M.jsx)(le,{}):t?Object(M.jsxs)(v.a,{width:1,display:"flex",justifyContent:"center",children:[Object(M.jsxs)(v.a,{width:.8,py:10,justifyContent:"center",children:[Object(M.jsx)(v.a,{pb:5,children:Object(M.jsx)(S.a,{variant:"outlined",startIcon:Object(M.jsx)(Me.a,{}),onClick:function(){return D(!0)},children:"Create Playlist"})}),m&&Object(M.jsxs)(k.a,{variant:"body1",color:"text.secondary",children:["There is no playlist. ",Object(M.jsx)("br",{}),'You can create a playlist from "CREATE PlAYLIST" button above.']}),!m&&Object(M.jsx)(_.a,{container:!0,direction:"row",alignItems:"center",alignContent:"center",spacing:2,width:1,children:s.map((function(e,t){return Object(M.jsx)(_.a,{item:!0,xs:12,sm:3,xl:2,children:Object(M.jsxs)(W.a,{onClick:V(e),style:{cursor:"pointer"},children:[Object(M.jsx)(ze.a,{action:Object(M.jsx)(j.a,{"aria-label":"settings",onClick:q(t),children:Object(M.jsx)(Re.a,{})}),title:e.name,subheader:"".concat(e.num_tracks," songs")}),null!=e.image_url&&Object(M.jsx)(Le.a,{component:"img",image:e.image_url,alt:e.name}),Object(M.jsxs)(Fe.a,{children:[Object(M.jsx)(k.a,{variant:"body1",color:"text.secondary",children:e.desc}),Object(M.jsx)(P.a,{}),Object(M.jsxs)(k.a,{variant:"body2",color:"text.secondary",children:[Object(M.jsx)("br",{}),"Created at"]}),Object(M.jsx)(k.a,{variant:"body2",color:"text.secondary",children:e.created_at})]})]})},e.id)}))})]}),Object(M.jsx)(De,{openCreatePlaylistDialog:I,setOpenCreatePlaylistDialog:D,onClickCompleteCallback:function(e){o((function(t){var n=Object(Ne.a)(t);return n.push(e),n}))}}),Object(M.jsxs)(X.a,{open:L,onClose:function(){return R(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(M.jsx)(Z.a,{id:"alert-dialog-title",children:"Are you sure you want to delete this playlist ?"}),Object(M.jsx)($.a,{children:Object(M.jsxs)(ee.a,{id:"alert-dialog-description",children:["All tracks and infomation of this playlist will be permanently deleted.",Object(M.jsx)("br",{}),"Are you sure you want to delete this playlist ?"]})}),Object(M.jsx)(te.a,{children:Object(M.jsx)(S.a,{onClick:function(){var e=s[T];Object(ge.a)(pe.a.mark((function t(){var n,c,a;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=g.a.auth().currentUser,t.next=3,n.getIdToken(!1);case 3:c=t.sent,a={headers:{Authorization:"Bearer ".concat(c)}},_e.a.delete("".concat(F,"/user/").concat(n.uid,"/playlist/").concat(e.id),a).then((function(t){s.splice(T,1),o((function(e){return Object(Ne.a)(e)})),y(0===s.length),U('"'.concat(e.name,'" is romoved from your playlist list !')),R(!1)})).catch((function(e){return console.log(e)}));case 6:case"end":return t.stop()}}),t)})))()},autoFocus:!0,children:"DELETE"})})]})]}):Object(M.jsx)(Ue,{})}var Ge=n(45),Ye=n(101),qe=n(263),Ve=Object(p.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"center"}}}));function He(e){var t=e.isSignedIn,n=e.isLoadingSignIn,a=Object(c.useState)([]),i=Object(h.a)(a,2),r=i[0],s=i[1],o=Object(c.useState)({}),l=Object(h.a)(o,2),d=l[0],u=l[1],O=Object(c.useState)(!0),p=Object(h.a)(O,2),f=p[0],m=p[1],y=Object(x.f)(),S=Ve(),C=Object(b.b)().enqueueSnackbar,w=Object(x.h)().playlistId;Object(c.useEffect)((function(){Object(ge.a)(pe.a.mark((function e(){var n,c,a;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return e.next=3,g.a.auth().currentUser;case 3:return n=e.sent,e.next=6,n.getIdToken(!1);case 6:c=e.sent,a={headers:{Authorization:"Bearer ".concat(c)}},_e.a.get("".concat(F,"/user/").concat(n.uid,"/playlist/").concat(w),a).then((function(e){s(e.data.playlist_tracks),u(e.data.playlist_info),m(!1)})).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})))()}),[t,w]);var I=function(e){return null==e?"":e.split(" ").slice(0,4).join(" ")},D=function(e,t){y.push("/track/".concat(e),{data:t})};return n||f?Object(M.jsx)(le,{}):t?Object(M.jsx)(v.a,{width:1,display:"flex",justifyContent:"center",children:Object(M.jsx)(v.a,{width:{xs:.9,sm:.8,xl:.5},justifyContent:"center",p:5,children:Object(M.jsxs)(_.a,{container:!0,spacing:8,children:[Object(M.jsx)(_.a,{item:!0,xs:12,sm:3,align:"center",children:Object(M.jsxs)(_.a,{container:!0,direction:"column",spacing:4,children:[Object(M.jsx)(_.a,{item:!0,xs:12,sm:6,align:"center",children:Object(M.jsx)(v.a,{width:"100%",children:Object(M.jsx)("img",{src:d.image_url,width:"100%",style:{maxWidth:"300px"},alt:d.name})})}),Object(M.jsxs)(_.a,{item:!0,xs:12,sm:6,className:S.root,children:[Object(M.jsx)(k.a,{variant:"h4",children:d.name}),Object(M.jsx)(k.a,{variant:"h5",color:"textSecondary",children:d.desc}),Object(M.jsx)(v.a,{py:2,children:Object(M.jsx)(P.a,{})}),Object(M.jsxs)(k.a,{variant:"body2",color:"textSecondary",children:[d.num_tracks," songs",Object(M.jsx)("br",{}),"Created at ",I(d.created_at),Object(M.jsx)("br",{}),"Updated at ",I(d.updated_at)]})]})]})}),Object(M.jsx)(_.a,{item:!0,xs:12,sm:9,align:"center",children:Object(M.jsx)(ye.a,{children:Object(M.jsxs)(ve.a,{children:[Object(M.jsx)(ke.a,{children:Object(M.jsxs)(Se.a,{children:[Object(M.jsx)(Ce.a,{align:"center"}),Object(M.jsx)(Ce.a,{align:"center",children:Object(M.jsx)(k.a,{variant:"subtitle1",gutterBottom:!0,children:"SONG"})}),Object(M.jsx)(Ce.a,{align:"center",children:Object(M.jsx)(k.a,{variant:"subtitle1",gutterBottom:!0})}),Object(M.jsx)(Ce.a,{}),Object(M.jsx)(Ce.a,{width:"15%",align:"center",children:Object(M.jsx)(k.a,{variant:"subtitle1",gutterBottom:!0,children:"BPM"})}),Object(M.jsx)(Ce.a,{width:"15%",align:"center",children:Object(M.jsx)(k.a,{variant:"subtitle1",gutterBottom:!0,children:"DELETE"})})]})}),Object(M.jsx)(Ye.a,{onDragEnd:function(e,t){e.destination&&e.destination.index!==e.source.index&&(s((function(t){var n=Object(Ne.a)(t),c=e.source.index,a=e.destination.index;return n.splice(c,1),n.splice(a,0,t[c]),u((function(e){return e.image_url=n[0].track.image_url,e})),n})),Object(ge.a)(pe.a.mark((function t(){var n,c,a,i;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=g.a.auth().currentUser,t.next=3,n.getIdToken(!1);case 3:c=t.sent,a={headers:{Authorization:"Bearer ".concat(c)}},i={orderFrom:e.source.index+1,orderTo:e.destination.index+1},_e.a.patch("".concat(F,"/user/").concat(n.uid,"/playlist/").concat(w,"/track"),i,a).catch((function(e){return console.log(e)}));case 7:case"end":return t.stop()}}),t)})))())},children:Object(M.jsx)(Ye.c,{droppableId:"droppable",direction:"vertical",children:function(e){return Object(M.jsxs)(we.a,Object(Ge.a)(Object(Ge.a)({ref:e.innerRef},e.droppableProps),{},{children:[r.map((function(e,t){return Object(M.jsx)(Ye.b,{draggableId:e.id,index:t,children:function(n,c){return Object(M.jsxs)(Se.a,Object(Ge.a)(Object(Ge.a)({hover:!0,ref:n.innerRef},n.draggableProps),{},{style:Object(Ge.a)(Object(Ge.a)({},n.draggableProps.style),{},{cursor:"pointer"}),children:[Object(M.jsx)(Ce.a,{align:"center",children:Object(M.jsx)("div",Object(Ge.a)(Object(Ge.a)({},n.dragHandleProps),{},{children:Object(M.jsx)(qe.a,{})}))}),Object(M.jsx)(Ce.a,{align:"center",onClick:function(){return D(e.track.spotify_id,e.track)},children:Object(M.jsx)("img",{src:e.track.image_url,height:"100",alt:e.track.song_name})}),Object(M.jsx)(Ce.a,{align:"center",onClick:function(){return D(e.track.spotify_id,e.track)},children:Object(M.jsx)(k.a,{variant:"h6",gutterBottom:!0,children:t+1})}),Object(M.jsxs)(Ce.a,{align:"left",onClick:function(){return D(e.track.spotify_id,e.track)},children:[Object(M.jsx)(k.a,{variant:"h6",children:Object(M.jsx)(v.a,{fontWeight:"fontWeightMedium",children:e.track.song_name})}),Object(M.jsx)("div",{children:e.track.artist})]}),Object(M.jsx)(Ce.a,{align:"center",children:Object(M.jsx)(k.a,{variant:"h5",gutterBottom:!0,children:Math.round(e.track.bpm)})}),Object(M.jsx)(Ce.a,{align:"center",children:Object(M.jsx)(j.a,{onClick:function(){return function(e,t){Object(ge.a)(pe.a.mark((function n(){var c,a,i;return pe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=g.a.auth().currentUser,n.next=3,c.getIdToken(!1);case 3:a=n.sent,i={headers:{Authorization:"Bearer ".concat(a)}},_e.a.delete("".concat(F,"/user/").concat(c.uid,"/playlist/").concat(w,"/track/").concat(e.id),i).then((function(n){r.splice(t,1),s((function(e){return Object(Ne.a)(e)})),u(Object(Ge.a)(Object(Ge.a)({},d),{},{num_tracks:d.num_tracks-1,image_url:r.length>0?r[0].track.image_url:null})),C('"'.concat(e.track.song_name," (").concat(e.track.artist,')" is romoved from your playlist !'))})).catch((function(e){return console.log(e)}));case 6:case"end":return n.stop()}}),n)})))()}(e,t)},children:Object(M.jsx)(Re.a,{})})})]}))}},e.id)})),e.placeholder]}))}})})]})})})]})})}):Object(M.jsx)(Ue,{})}var Ke=Object(p.a)((function(e){return{pageContainer:{display:"flex",flexDirection:"column",minHeight:"100vh"},contentWrap:{flex:1}}}));function Je(){var e=Ke(),t=Object(c.useState)(!1),n=Object(h.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(!0),o=Object(h.a)(s,2),l=o[0],j=o[1],d=Object(c.useState)(!1),u=Object(h.a)(d,2),p=u[0],f=u[1],m=a.a.useState(!1),y=Object(h.a)(m,2),v=y[0],k=y[1],S=Object(b.b)().enqueueSnackbar;return Object(c.useEffect)((function(){g.a.auth().onAuthStateChanged((function(e){e?(S("Sign In !"),r(!0),f(e)):(r(!1),f({})),j(!1)}))}),[S]),Object(M.jsxs)("div",{className:e.pageContainer,children:[Object(M.jsx)("div",{className:e.contentWrap,children:Object(M.jsxs)(O.a,{children:[Object(M.jsx)(U,{isSignedIn:i,user:p,setSignInDialogOpen:function(){return k(!0)},signOut:function(){S("Sign Out !"),g.a.auth().signOut()}}),Object(M.jsxs)(x.c,{children:[Object(M.jsx)(x.a,{path:"/",exact:!0,children:Object(M.jsx)(Ae,{isSignedIn:i,setSignInDialogOpen:function(){return k(!0)}})}),Object(M.jsx)(x.a,{path:"/track",exact:!0,children:Object(M.jsx)(Te,{isSignedIn:i,setSignInDialogOpen:function(){return k(!0)}})}),Object(M.jsx)(x.a,{path:"/user/:uid/playlist",exact:!0,children:Object(M.jsx)(We,{isSignedIn:i,isLoadingSignIn:l})}),Object(M.jsx)(x.a,{path:"/user/:uid/playlist/:playlistId",children:Object(M.jsx)(He,{isSignedIn:i,isLoadingSignIn:l})}),Object(M.jsx)(x.a,{path:"/track/:spotify_id",children:Object(M.jsx)(V,{})})]})]})}),Object(M.jsx)(Q,{}),Object(M.jsx)(re,{signInDialogOpen:v,closeSignInDialog:function(){k(!1)}})]})}var Qe=Object(s.a)({palette:{primary:{main:"#da0047",contrastText:"#fff"},secondary:{main:"#ffffff",contrastText:"#a0a0a0"},textSecondary:{main:"#a0a0a0",contrastText:"#a0a0a0"}},typography:{fontFamily:["Lato","Raleway"].join(",")}}),Xe=Object(s.a)({palette:{primary:{main:"#da0047",contrastText:"#fff"}},typography:{fontFamily:["Bowlby One SC"].join(",")}});var Ze=function(){var e=a.a.createRef(),t=function(t){return function(){e.current.closeSnackbar(t)}};return Object(M.jsx)(o.a,{injectFirst:!0,children:Object(M.jsx)(l.a,{theme:Qe,children:Object(M.jsx)(b.a,{maxSnack:3,ref:e,action:function(e){return Object(M.jsx)(j.a,{"aria-label":"close",onClick:t(e),color:"secondary",children:Object(M.jsx)(u.a,{})})},children:Object(M.jsx)(Je,{})})})})},$e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,295)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};r.a.render(Object(M.jsx)(a.a.StrictMode,{children:Object(M.jsx)(Ze,{})}),document.getElementById("root")),$e()}},[[207,1,2]]]);
//# sourceMappingURL=main.4d565e0a.chunk.js.map